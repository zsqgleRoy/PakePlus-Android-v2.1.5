import{d as B,u as U,c as a,b as n,w as m,g as W,h as r,i as s,a as o,F as y,r as h,k as l,e as k,t as w,f as F,m as H,p as g}from"./index-FEG_SoV_.js";import{f as D,a as E,w as R}from"./format-BrnGdaLm.js";import{T as S}from"./TabBar-D-4pEMcD.js";import{W as $}from"./WebsiteCard-CKRhDMM1.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const A={class:"favorites-page page-container"},L={class:"content-list"},M={class:"content-list"},j=["onClick"],q={class:"history-icon"},G=["src","alt"],J={class:"history-content"},K={class:"history-name"},O={class:"history-time"},P=B({__name:"Favorites",setup(Q){const i=U(),_=W("favorites"),d=g(()=>R.filter(e=>i.favorites.includes(e.id))),v=g(()=>i.visitHistory),p=e=>E(e),C=e=>{const c=e.target;c.style.display="none"},T=e=>{i.addVisitRecord({websiteId:e.id,websiteName:e.name,websiteUrl:e.url,visitTime:Date.now()}),window.open(e.url,"_blank")},I=e=>{i.addVisitRecord({...e,visitTime:Date.now()}),window.open(e.websiteUrl,"_blank")},N=e=>{i.removeVisitRecord(e)};return(e,c)=>{const u=r("van-empty"),f=r("van-tab"),b=r("van-icon"),V=r("van-tabs");return s(),a("div",A,[n(V,{active:_.value,"onUpdate:active":c[0]||(c[0]=t=>_.value=t)},{default:m(()=>[n(f,{title:"我的收藏",name:"favorites"},{default:m(()=>[o("div",L,[(s(!0),a(y,null,h(d.value,t=>(s(),l($,{key:t.id,website:t,onClick:T},null,8,["website"]))),128)),d.value.length===0?(s(),l(u,{key:0,description:"暂无收藏",image:"star-o"})):k("",!0)])]),_:1}),n(f,{title:"最近访问",name:"history"},{default:m(()=>[o("div",M,[(s(!0),a(y,null,h(v.value,t=>(s(),a("div",{key:t.websiteId+t.visitTime,class:"history-item",onClick:x=>I(t)},[o("div",q,[p(t.websiteUrl)?(s(),a("img",{key:0,src:p(t.websiteUrl),alt:t.websiteName,onError:C},null,40,G)):(s(),l(b,{key:1,name:"link-o",size:"20px"}))]),o("div",J,[o("div",K,w(t.websiteName),1),o("div",O,w(F(D)(t.visitTime)),1)]),n(b,{name:"cross",class:"delete-icon",onClick:H(x=>N(t),["stop"])},null,8,["onClick"])],8,j))),128)),v.value.length===0?(s(),l(u,{key:0,description:"暂无访问记录",image:"clock-o"})):k("",!0)])]),_:1})]),_:1},8,["active"]),n(S)])}}}),se=z(P,[["__scopeId","data-v-a498b19b"]]);export{se as default};
